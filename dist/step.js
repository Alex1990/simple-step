/*!
 * simple-step
 * http://alex1990.github.com/simple-step
*/
!function(a){function b(b){if(b=this.opts=a.extend({},c,b),!b.el)throw"Need the selector";this.$el=a(b.el),this.btns={cancel:this.$el.find(".step-footer .step-cancel"),prev:this.$el.find(".step-footer .step-prev"),next:this.$el.find(".step-footer .step-next"),finish:this.$el.find(".step-footer .step-finish")},this.prevEnabled=this.nextEnabled=!0,this.index=b.startAt,this.totalCount=this.$el.find(".step-header-item").length,this.init()}var c={el:"",effect:"none",duration:350,startAt:0,showCancel:!0,showPrev:!0,showNext:!0,showFinish:!1,activatedCls:"activated",activeCls:"active",onprev:function(){},onnext:function(){},oncancel:function(){},onfinish:function(){},onbeforeprev:function(){},onbeforenext:function(){}};a.extend(b.prototype,{init:function(){this.initButtons(),this.bindEvents()},initButtons:function(){this.opts.showCancel||this.btns.cancel.remove(),this.opts.showPrev||this.btns.prev.remove(),this.gotoStep(this.index)},bindEvents:function(){var a=this;a.$el.delegate(".step-footer .step-cancel","click",function(){a.cancel()}).delegate(".step-footer .step-finish","click",function(){a.finish()}).delegate(".step-footer .step-prev","click",function(){a.opts.onbeforeprev.call(this,this.index),a.prevEnabled&&a.prev()}).delegate(".step-footer .step-next","click",function(){a.opts.onbeforenext.call(this,this.index),a.nextEnabled&&a.next()})},index:function(){return this.index},gotoStep:function(b){this.index=b;var c=this.$el.find(".step-header-item").eq(b),d=a(c.data("body")),e=this.sequence?this.opts.effect:"none";if(this.sequence&&!this.isSetDimension){var f=this.$el.find(".step-body");this.stepBodyWidth=f.width(),f.css({position:"relative",width:this.stepBodyWidth,height:f.height(),overflow:"hidden"}),f.find(".step-body-item").css({position:"absolute",top:0,left:0,width:"100%"})}this.effectExecutors[e].call(this,c,d);var g=this.btns;0>=b?g.prev.hide():g.prev.show(),b>=this.totalCount-1?(g.next.hide(),g.finish.show()):(g.next.show(),g.finish.hide()),this.opts.showFinish&&g.finish.show()},prev:function(){this.index>0&&(this.index--,this.sequence="prev",this.gotoStep(this.index)),this.opts.onprev.call(this,this.index)},next:function(){this.index<this.totalCount-1&&(this.index++,this.sequence="next",this.gotoStep(this.index)),this.opts.onnext.call(this,this.index)},cancel:function(){this.opts.oncancel.call(this,this.index)},finish:function(){this.opts.onfinish.call(this,this.index)},activeClass:function(a,b){var c=this.opts.activeCls,d=this.opts.activatedCls;a.siblings(".step-header-item").removeClass(c+" "+d).end().addClass(c).removeClass(d).prevAll(".step-header-item").addClass(d),b.siblings(".step-body-item").removeClass(c+" "+d).end().addClass(c).removeClass(d).prevAll(".step-body-item").addClass(d)},effectExecutors:{none:function(a,b){this.activeClass(a,b)},slide:function(a,b){var c=this,d={prev:{left:-c.stepBodyWidth,$el:b.next(".step-body-item")},next:{left:c.stepBodyWidth,$el:b.prev(".step-body-item")}};b.css({left:d[c.sequence].left}).show().animate({left:0},c.opts.duration,function(){d[c.sequence].$el.hide(),c.activeClass(a,b)}),d[c.sequence].$el.animate({left:-d[c.sequence].left},c.opts.duration)}}});var d=a.fn.step;a.fn.step=function(c){return c=a.extend({el:this},c),new b(c)},a.fn.step.noConflict=d}(jQuery);